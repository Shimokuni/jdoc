#!/usr/bin/env ruby
$LOAD_PATH.unshift File.expand_path("../../lib", __FILE__)
require "jdoc"
require "yaml"

path = ARGV[0]

case File.extname(path)
when ".yml", ".yaml"
  schema = YAML.load_file(path)
else
  str = File.read(path)
  schema = MultiJson.decode(str)
end

puts Jdoc::Generator.call(schema)
